<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />

        <title>Guardians of the Koppie</title>

        <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>

        <script
            type="text/javascript"
            src="https://raw.githack.com/AR-js-org/AR.js/3.4.7/three.js/build/ar-threex-location-only.js"></script>

        <script
            type="text/javascript"
            src="https://raw.githack.com/AR-js-org/AR.js/3.4.7/aframe/build/aframe-ar.js"></script>

        <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.6.0/dist/aframe-extras.min.js"></script>

        <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
    </head>
    <body>
        <a-scene
            vr-mode-ui="enabled: false"
            arjs="sourceType: webcam; videoTexture: true; debugUIEnabled: false"
            renderer="antialias: true; alpha: true">
            <a-camera gps-new-camera="gpsMinDistance: 5"
                ><a-cursor
                    id="cursor"
                    raycaster="objects: .clickable"
                    material="color: white; shader: flat"
                    geometry="radiusInner: 0.01; radiusOuter: 0.02"
                    fuse="false">
                </a-cursor
            ></a-camera>

            <a-entity
                id="mymodel"
                gltf-model="./Assets/earth-runestone.glb"
                rotation="0 0 0"
                scale="2 2 2"
                gps-new-entity-place="latitude: -26.021885; longitude: 28.030929"
                sound="src: url(./Assets/earth-guardian-theme.mp3); autoplay: false; volume: 1">
                class="clickable">
                <a-image
                    id="tapToStart"
                    src="./Assets/tap-to-start.svg"
                    position="0 1.5 0"
                    width="1"
                    height="1"
                    look-at="[gps-new-camera]">
                </a-image>
            </a-entity>
        </a-scene>

        <script>
            const model = document.querySelector("#mymodel");
            const tapImage = model.querySelector("#tapToStart");

            model.addEventListener("click", (e) => {
                model.setAttribute("gltf-model", "./Assets/earth-guardian.glb");
                model.setAttribute("scale", "10 10 10");
                model.setAttribute("animation-mixer", "");
                tapImage.setAttribute("visible", "false");
                model.components.sound.playSound();
            });
        </script>
    </body>
</html>
